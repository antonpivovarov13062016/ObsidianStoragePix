


https://docs.pixrobotics.com/articles/#!rpa/master-queues



Очереди данных служат для хранения данных и последовательного доступа к ним.  
  
Работать с очередями данных можно:

- Через интерфейс Master
- Используя блоки процессов в Master
- Через активности Studio
- Через API



![[Pasted image 20240713141116.png]]

## Работа с очередями через интерфейс PIX Master [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2__286520341 "Ссылка на этот заголовок")

На вкладке Очереди данных отображены все очереди данных, которые обрабатывает данный Мастер.

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-17.png)

  

### Создание новой очереди [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h3_1795083579 "Ссылка на этот заголовок")

Чтобы создать новую очередь данных нажмите + Добавить очередь данных.  
  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-18.png)

Заполните поля очереди данных:

- Название
- Описание
- Максимальное время ожидания обработки элемента очереди - время, после которого элемент из статуса New переходит в статус TimedOut.
- Максимальное время обработки элемента очереди в статусе Processing - время, после которого элемент из статуса Processing переходит в статус TimedOut.
- Группы
- ​Использовать попытки - отметьте этот чекбокс. чтобы при ошибке элемент очереди обрабатывался заново
    - Максимальное количество попыток обработки
    - Задержка для попытки обработки - задержка по времени между попытками
- Помещать элемент в конец очереди при повторении обработки
- Проверять уникальность ссылок
    - Статусы, к которым применяется уникальность ссылок
- SLA для элемента очереди - время, за которое должен отработать элемент очереди данных, начиная со времени создания (см. [пример](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h3_1075274566))

  
![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-19.png)

  

Чтобы редактировать свойства очереди, кликните имя очереди или значок редактирования. 

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/editDataQueue.png)

  

Чтобы увидеть подробную информацию об очереди перейдите на вкладку Детали. Это можно сделать либо из вкладки **Очереди данных**, либо из вкладки **редактирования очереди**.

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/detailsDataQueue.png)

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/detailsDataQueue2toCsv.png)

  

  

### Окно элемента очереди с его данными/атрибутами [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h3_1939990666 "Ссылка на этот заголовок")

  
Для элемента очереди выводится **значение** (**V**), расширенные **поля данных** (**T**) и все **атрибуты** (**P**).  
Кроме того, для **расширенных полей данных** (Входные данные, Выходные данные, _Таблица_), обычно хранящихся в сериализованном виде, можно просмотреть значения в отдельном окне, в таблице (**DD**).  
  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-data/master-data-2024-01-17-4.png)

  

  

## Выгрузка деталей очереди в CSV [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2__1412077539 "Ссылка на этот заголовок")

Чтобы выгрузить информацию об элементах этой очереди в CSV-файл:

1. Откройте очередь в списке очередей данных
2. Перейдите на вкладку Детали
3. Нажмите кнопку CSV.

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/detailsDataQueue-1-30.png)

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/detailsDataQueue2toCsv.png)

В получившемся CSV-файле будут следующие столбцы:

- Id - Идентификатор элемента данных
- Статус
- Приоритет - Приоритет в очереди обработки элемента
- Количество попыток - Сколько раз Мастер пытался обработать элемент
- Крайний срок обработки - После этой даты элемент получит статус TimedOut и не будет обработан
- Отложено до - Дата начала обработки элемента
- Время добавления - Дата добавления элемента в очередь
- Время завершения обработки - Дата в которую обработка элемента была закончена в Мастере
- Комментарий
- Ссылка
- Тип ошибки
- Сообщение ошибки
- Входные данные в виде сериализованного Словаря
- Значение элемента в виде Строки
- Сериализованная Таблица

  
  

## Работа с очередями через блоки процессов в PIX Master  [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2_1096077478 "Ссылка на этот заголовок")

  
Для работы с Очередями в Master предназначены блоки:  

- Добавить в очередь
- Получить из очереди

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-25.png)

  

|   |   |
|---|---|
|![Warning](https://docs.pixrobotics.com/resources/Storage/rpa/Warning.png)|Чтобы добавить в очередь данные из RabbitMQ, необходимо в поле "Значение" ввести тег "$".|

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-27.png)  

  

  

## Работа с очередями через активности PIX Studio  [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2__158266805 "Ссылка на этот заголовок")

  

В студии доступны следующие активности:  

- [Отменить элемент очереди](https://docs.pixrobotics.com/articles/rpa/actions-queues-cancelqueueitem)
- [Подтвердить завершение обработки элемента очереди](https://docs.pixrobotics.com/articles/rpa/actions-queues-confirmelement)
- [Обработать элемент из очереди](https://docs.pixrobotics.com/articles/rpa/actions-queues-getelement)
- [Получить элементы очереди](https://docs.pixrobotics.com/articles/rpa/actions-queues-getelementsbyfilter)
- [Отложить элемент очереди](https://docs.pixrobotics.com/articles/rpa/actions-queues-postponeelement)
- [Поместить элемент в очередь](https://docs.pixrobotics.com/articles/rpa/actions-queues-pushelement)
- [Установить комментарий элемента](https://docs.pixrobotics.com/articles/rpa/actions-queues-setcomment)

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-28.png)

  

## Работа с очередями через API  [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2_567225889 "Ссылка на этот заголовок")

  
В [этой инструкции](https://docs.pixrobotics.com/articles/rpa/master-api/a/queuesapi) можно узнать, как работать с очередями данных через API-запросы.  

  

  

## Операции и изменение статусов элементов очереди [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2__797321941 "Ссылка на этот заголовок")

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-02-16-1.png)  

  
Очереди данных. Схема операций и статусов в PIX Master 1.30 и PIX Studio 2.24.3 и выше.

  

## Редактирование элемента очереди[](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2_1438369821 "Ссылка на этот заголовок")

  

Элементы очереди в статусе **Draft** можно редактировать. Для этого откройте окно **редактирования очереди данных** и перейдите на вкладку **Детали**. Нажмите кнопку редактирования элемента (R):

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-02-16.jpg)

  

Форма редактирования элемента очереди в статусе Draft отображает поля, описанные в Активности **Поместить элемент в очередь** с опцией **Черновик**. Часть значений полей может быть недоступна для редактирования - они выводятся для информации; другие поля могут изменяться пользователем.

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-02-16.png)

  

После завершения редактирования пользователь может выбрать в каком статусе сохранить элемент очереди:

  

- **[Сохранить черновик]** (D):

данные сохранятся в поле Значение и элемент очереди останется в статусе **Draft**, что может потребоваться, если данные заполнены частично и предполагается их последующее дополнение.

- **[**Сохранить и отправить в работу] (N) – данные сохранятся в поля:

- Значение (System.String) в виде JSON-описания полей формы с данными
- Входные данные (Dictionary<String,Object>) в виде Словаря для доступа к записи по ключу

Статус изменится на New и далее элемент очереди будет обработан по обычным правилам.

Примечание. Для элемента очереди данных значения Data и InputData хранятся в базе данных Master в строковых полях, а с точки зрения типов данных C# они являются Строкой и Словарем, соответственно – см. таблицу:

  

|   |   |   |   |
|---|---|---|---|
|Поля элемента очереди данных  <br>для упрощенных форм ввода  <br>при изменении статуса DraftàNew|Тип данных C#|Имя поля в  <br>базе данных|Тип данных СУБД  MS SQL и Postgres|
|Значение|_System.String_|Data|nvarchar(max)<br><br>text|
|Входные данные|_Dictionary<String,Object>_|InputData|nvarchar(max)<br><br>text|

  

Данные в поле Входные данные для элемента очереди в статусе New возможно использовать при дальнейшей обработке элемента очереди роботом/блоком процесса/API, как это представлено на [схеме](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2__797321941).

  

В интерфейсе для элемента очереди данных возможно просмотреть **Входные данные** в виде таблицы:

  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-02-16-2.png)

  

  

## Отмена элемента очереди  [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2__1959750887 "Ссылка на этот заголовок")

  
В интерфейсе Очереди данных - Детали есть возможность отмены элементов очереди данных с текущим статусом New, Processingи Retried - в столбце с операциями появилась кнопка Отменить элемент (С).  
  

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-30.png)

  

  

|При выборе ✖ - открывается окно подтверждения отмены.  <br>После подтверждения:<br><br>- статус выбранного элемента изменится на Canceled<br>- в логах аудита пользователей сохранится запись об отмене элемента очереди данных||![](https://docs.pixrobotics.com/resources/Storage/rpa/rpa/images/tild6461-6339-4630-a665-343433636364__pix_master___125docx.png)|
|---|---|---|

  

## Ограничения времени ожидания и обработки элемента очереди [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h2__717156683 "Ссылка на этот заголовок")

  

### Значения по умолчанию и правило приоритетов для ограничений [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h3_1538089995 "Ссылка на этот заголовок")

При создании новой Очереди данных для полей:

-  "Максимальное время ожидания обработки элемента"
-  "Максимальное время обработки элемента в статусе Processing"

значения  по умолчанию устанавливаются = 0.

![](https://docs.pixrobotics.com/resources/Storage/rpa/master-queues/master-queues-2024-01-17-32.png)

  

### SLA для элемента очереди [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h3_1075274566 "Ссылка на этот заголовок")

SLA для элемента очереди - это время, за которое должен отработать элемент очереди данных, начиная со времени создания.  
  
Пример: в 5:00 в очереди данных был создан элемент с SLA = 3600 сек. На протяжении нескольких часов этот элемент не переходил в работу. Вне зависимости, взяли его в работу или нет, элемент очереди данных не выполнился в рамках SLA, но продолжит обрабатываться.  

  

  

### Правило приоритетов  [](https://docs.pixrobotics.com/articles/rpa/master-queues/a/h3__739522146 "Ссылка на этот заголовок")

Ограничение времени ожидания обработки управляется на уровне настроек PIX Master (Админ - Настройки - Настройки очередей данных) параметром "Максимальное время обработки элемента очереди данных (час)"

|   |   |
|---|---|
|![Warning](https://docs.pixrobotics.com/resources/Storage/rpa/Warning.png)|Общее значение сработает только если на уровне очереди установлено значение = 0. В остальных случаях приоритетно значение установленное для конкретной очереди.|

|   |   |   |
|---|---|---|
|Очередь данных \<br><br>«Максимальное время ожидания обработки элемента» (мин)|Админ \ Настройки \  <br>«Максимальное время обработки элемента очереди данных (час)|Итоговое для очереди<br><br>Макс.время ожидания обработки элемента|
|0|0|неограниченно|
|0|24 ч|24 ч|
|120 мин = 2 ч|0|2ч|
|120 мин = 2 ч|24 ч|2 ч|
|1200 мин = 20 ч|12 ч|20 ч|